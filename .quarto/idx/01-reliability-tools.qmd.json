{"title":"Assignment 1: Reliability and tools for reproducible data science","markdown":{"yaml":{"output":"html_document","editor_options":{"chunk_output_type":"console"}},"headingText":"Assignment 1: Reliability and tools for reproducible data science","headingAttr":{"id":"assignment1","classes":[],"keyvalue":[]},"containsRefs":false,"markdown":"\n\n\n## Introduksjon\n\nReliabilitet er en utrolig viktig faktor innenfor fysiologisk testing. Hvis man ønsker å følge utviklingen til en utøver over en lenger periode er det viktig at testen vi benytter oss av, og utstyret som brukes i testen måler tilnærmet likt hver gang. Hvis testene som blir brukt har høy reliabilitet kan utøvere og trenere stole på at forskjellene i resultater mellom ulike tester skyldes endringer i fysiologiske faktorer og at det ikke er feilmålinger som gir utslag. \n\nFor å i ettertid kunne evaluere effekten av en treningsplan, intervensjon eller periode må man kunne stole på testene som blir gjennomført. Dersom testene som blir benyttet har lav reliabilitet, kan det være vanskelig å skille mellom virkelige prestasjonsforbedringer og tilfeldige variasjoner som skyldes unøyaktighet i målingene. Dette kan resultere i at man endrer et godt fungerende treningsopplegg, eller at man fortsetter med et dårlig fungerende treningsopplegg. \n\nI idrettsvitenskapen forskes det gjerne på effekt av ulike intervensjoner. Uavhengig av om det gjøres forskning på utrente eller elite-utøvere er det viktig at målingene har høy reliabilitet. Dette med bakgrunn i at vi vil levere god kvalitet i forskningen og at det skal være litteratur man skal kunne stole på. \n\nDet ble gjennomført fire testdager 28.08.2024, 29.08.2024, 9.09.2024 og 11.09.2024 for å teste $\\dot{V}O_{2maks}$. Formålet med disse testene var å øve på å kunne gjennomføre fysiologiske tester med høy reliabilitet. Reliabilitet refererer til graden av konsistens eller pålitelighet i målinger evnen til å kunne reprodusere [@RN130], et eksempel på dette er ved fysiologisk testing som repeteres i forskningsprosjekter, der bedre reliabilitet vil indikere hvor god presisjonen er og måling av endring over tid [@RN130]. Det er mange begreper som er relevante for å kunne si noe om reliabilitet, men standardavviket er et av disse. Standardavviket sier noe om hvor langt unna verdiens gjennomsnittlige avstand er fra gjennomsnittet [@Spiegelhalter].\n\nKroppens maksimale oksygenopptak ($\\dot{V}O_{2maks}$) sier noe om kroppens maksimale evne til å ta opp og omsette oksygen [@Bassett]. $\\dot{V}O_{2maks}$ kan beskrives ved hjelp av Ficks likning: $\\dot{V}O_{2maks}$=MVmaks x a-vO2differansemaks. $\\dot{V}O_{2maks}$ måles ved at man måler hvor mye oksygen kroppen klarer å omsette pr minutt [@Bassett]. Det finnes ulike måter og fremstille $\\dot{V}O_{2maks}$ på, de to av disse er absolutt $\\dot{V}O_{2maks}$ beskrevet som (ml &times;min<sup>-1</sup>) eller relative tall relatert til kroppsvekt (ml/kg/min).\n\nI resultatdelen har vi valgt å bruke relativ $\\dot{V}O_{2maks}$ for å beregne reliabiliteten til testene vi har gjennomført. Vi har også valgt å se på sammenhengen mellom relativ $\\dot{V}O_{2maks}$ og wattmaks under $\\dot{V}O_{2maks}$-testen. Forskning viser at høy $\\dot{V}O_{2maks}$, sammen med god mekanisk effektivitet og høy laktatterskel gir bedre utholdenhetsprestasjoner, noe som reflekteres i høyere Wmaks/kg [@Joyner].\n\n## Metode\n\n$\\dot{V}O_{2maks}$-testen ble gjennomført på en ergometersykkel med bukkestyre (Lode Excalibur Sport; Lode B.V., Groningen, Nederland). Kranken kalibreres på Lode-sykkelen før hver teststart. Dette gjøres for å få nøyaktige tråkkdata på hver forsøksperson. Sykkel stilles inn etter utøvers ønske for å sikre best mulig sittestilling ved første test. Sykkel stilles inn etter nøyaktig samme mål ved senere tester for å gjøre reliabiliteten høy. For å måle det maksimale oksygenopptaket ble det brukt Vyntus (Jaeger Vyntus CPX, Hoechberg, Tyskland). Gassanalysator kalibreres til \\< 2,0% differanse og luftvolum kalibreres til \\< 0,2% differanse. Syklistene veies med de klærne de skal sykle med, og 0,3kg trekkes fra (300g er et estimat på vekten av klærne forsøkspersonen har på). For å kunne sikre god relabilitet ble det tydeliggjort at man skulle replisere det siste måltidet før test, ha det samme koffeininntaket, avstå fra alkohol og tobakk de siste 72 timene før test og prøve å få tilnærmet lik søvn, samt trene det samme dagen før test. Da dette er faktorer som kan spille inn på prestasjon og metabolismen [@RN2511] og dermed påvirke relabiliteten. \n\n$\\dot{V}O_{2maks}$-testen gjennomføres etter en fem minutters standardisert oppvarming på ergometersykkelen. Oppvarmingen starter to minutter på 11-12 i Borg, deretter to minutter på 15 i Borg før ett minutt på 11-12 Borg. Testen starter på en belastning (Watt) basert på deltagerens nivå i samråd med utøver og testleder. Det viktigste er at påfølgende $\\dot{V}O_{2maks}$ tester starter på samme watt. Wattbelastningen økte med 20W eller 25W (20W for kvinne og 25W for mann) hvert minutt frem til utøveren når maksimal utmattelse. Maksimal utmattelse ble i denne sammenheng ikke evne til å kunne opprettholde RPM > 60. Under $\\dot{V}O_{2maks}$ var RPM valgfritt. Testleder gjør verbal oppmuntring og sekundering underveis i testen. For at verbal oppmuntring og instruksjon ved test skulle være lik etterstreb vi å ha samme testleder til samme forsøksperson [@Halperin]. Det blir registrert nye oksygenmålinger hvert 30 sek, og de to høyeste påfølgende målingene blir definert som $\\dot{V}O_{2maks}$. Umiddelbart etter test oppgir utøveren opplevd anstrengelse på Borg skala. Maks hjertefrekvens blir lest av fra utøvers pulsklokke. Blodprøve ble tatt fra utøverens fingertupp 1 min etter endt test for å måle \\[BLa-\\]. \\[BLa-\\] blir deretter målt ved hjelp av en Biosen C-line (Biosen C-line Lactate Analyzer, EKF Diagnostic GmbH, Barleben, Germany). Etter endt test ble det hentet ut data som videre ble plottet inn i Excel og videre ført statistikk på ved hjelp av Rstudio.\n\n\n```{r}\n#| code-fold: true\n#| message: false\n#| warning: false\n\nlibrary(readxl)\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(magrittr)\nlibrary(gt)\nlibrary(ggtext)\ndf <- read_xlsx(\"o2-test.xlsx\")\n\n```\n## Resultat\n\nEtter at testene er gjennomført kan vi se nærmere på hver forsøkperson sine data. Dette gir muligheten til å se på hver enkelt forsøksperson om man finner dette interessant (Table 1.1). \nVerdiene man kan se i tabellen, er verdier som er plottet etter endt $\\dot{V}O_{2maks}$-test. \n```{r}\n#| code-fold: true\n#| message: false\n#| warning: false\n\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(knitr)\nlibrary(kableExtra)\n\n# Generer en tabell med nødvendige beregninger\ndf.tbl <- df %>%\n  select(id, timepoint, weight, w.max:borg.max) %>%\n  select(-hr.max, -la.max, -bf.max, -vco2.max, -rer.max, -ve.max) %>%\n  mutate(rel.vo2max = vo2.max / weight,\n         rel.wmax = w.max / weight) %>%\n  pivot_longer(names_to = \"Parameter\", values_to = \"verdier\", cols = w.max:rel.wmax) %>%\n  group_by(id, Parameter) %>%\n  summarise(m = mean(verdier, na.rm = TRUE),\n            s = sd(verdier, na.rm = TRUE)) %>%\n  mutate(m_s = paste0(signif(m, 3), \" (\", signif(s, 2), \")\")) %>%\n  ungroup() %>%\n  select(-m, -s) %>%\n  pivot_wider(names_from = \"id\", values_from = \"m_s\")\n\n# Endre radnavnene ved å bruke mutate() hvis radnavnene er i en kolonne\ndf.tbl <- df.tbl %>%\n  mutate(Parameter = case_when(\n    Parameter == \"rel.vo2max\" ~ \"VO$_{2max}$ (ml/kg/min)\",\n    Parameter == \"w.max\" ~ \"Watt$_{max}$\",\n    Parameter == \"borg.max\" ~ \"Borg$_{max}$\",\n    Parameter == \"vo2.max\" ~ \"VO$_{2max}$ (ml/min)\",\n    Parameter == \"rel.wmax\" ~ \"Watt/kg\",\n    TRUE ~ Parameter  # Hvis verdien ikke matches, behold opprinnelig navn\n  ))\n\n# Lag tabellen med kable og kableExtra, med escape = FALSE for å tillate LaTeX-syntaks\ndf.tbl %>%\n  kable(\"latex\",\n        booktabs = TRUE,\n        escape = FALSE) %>%\n  kable_styling(\n    font_size = 6,              # Redusert skriftstørrelse for å få mer plass\n    full_width = FALSE,\n    position = \"center\",\n    latex_options = \"H\"\n  ) %>%\n  column_spec(2:ncol(df.tbl), width = \"0.5cm\") %>%  # Juster kolonnebredden for alle kolonner unntatt første\n  row_spec(0, bold = TRUE)  |> \n  # Gjør header-raden fet\n  add_footnote(label = \"Table 1.1: Tabellen viser hver deltakers gjennomsnitt og standardavvik i () på verdier vi har undersøkt\", notation = \"none\")\n\n\n\n```\n\n\n\n```{r}\n#| code-fold: true\n#| eval: false\n\n\nlibrary(dplyr)\nlibrary(gt)\n\ndf |> \n  filter(timepoint == \"t1\") |> \n  select(id, vo2.max, w.max, sex) |> \n  group_by(sex) |> \n  summarise(o2mean = mean(vo2.max, na.rm = TRUE),\n            wmean = mean(w.max, na.rm = TRUE),\n            o2sd = sd(vo2.max, na.rm = TRUE),\n            wsd = sd(w.max, na.rm = TRUE))\n\n\n\n  \n\n\n```\n\n\n\n```{r}\n#| code-fold: true\no2meanK <- 3163\no2meanM <- 4380\no2sdK <- 484\no2sdM <- 515\nwmeanK <- 257\nwmeanM <- 352\nwsdK <- 31.0\nwsdM <- 51.6\n```\n\n\nEtter å ha gjennomført VO~2maks~-testene ser vi at kvinnene på 1MAIDR har et gjennomsnittlig oksygenopptak på `r o2meanK` ± `r o2sdK`. Mennene har derimot et gjennomsnittlig oksygenopptak på `r o2meanM` ± `r o2sdM`.\n\n```{r}\n#| code-fold: true\n\ndf.rel <- df |> \n  select(id, timepoint, weight, vo2.max, w.max) |> \n  mutate(rel.vo2 = vo2.max / weight) |> \n  mutate(rel.wmax = w.max / weight)\n\n\n```\n\n\n\n\n\n```{r}\n#| code-fold: true\n#| tbl-cap: \"Reliability relativ vo2maks T1&T2\"\n#| eval: false\n\n\ndf.rel |> \n  \n  #velger hvilke variabler vi er interessert i å se på\n  \n  select(id, timepoint, rel.vo2) |> \n\n\n\n  #benytter oss av pivot_wider for å lage tidy_data\n\n    pivot_wider(names_from = timepoint,\n                values_from = rel.vo2) |> \n    mutate(diff = t2 - t1) |> \n    summarise(MEAN = mean(c(t1, t2), na.rm = TRUE), \n            SD = sd(diff, na.rm = TRUE), \n            TE = SD / sqrt(2), \n            CV = TE/MEAN * 100) |> \n  gt() |> \n  fmt_number(decimals = 2)\n\n\n```\n\n```{r}\n#| echo: false\ncv_perct1_t2 <- 2.47\n```\n\n\n\n\n\n```{r}\n#| code-fold: true\n#| tbl-cap: \"Reliability relativ vo2maks T3&T4\"\n#| eval: false\n\n\ndf.rel |> \n  \n  #velger hvilke variabler vi er interessert i å se på\n  \n  select(id, timepoint, rel.vo2) |> \n\n\n\n  #benytter oss av pivot_wider for å lage tidy_data\n\n    pivot_wider(names_from = timepoint,\n                values_from = rel.vo2) |> \n    mutate(diff = t4 - t3) |> \n    summarise(MEAN = mean(c(t3, t4), na.rm = TRUE), \n            SD = sd(diff, na.rm = TRUE), \n            TE = SD / sqrt(2), \n            CV = TE/MEAN * 100) |> \n  gt() |> \n   fmt_number(decimals = 2)\n \n\n\n```\n\n```{r}\n#| echo: false\ncv_perct3_t4 <- 4.78\n```\n\n\n\nReliabiliteten mellom t1 og t2 er `r cv_perct1_t2`%, mens reliabiliteten mellom t3 og t4 er `r cv_perct3_t4`%. \n\n### Korrelasjon mellom Vo2maks og Wattmaks per kg\n\n```{r}\n#| code-fold: true\n#| message: false\n#| warning: false\n#| fig-cap: \"Figur 1: Hvert punkt = én observasjon\"\n\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(latex2exp)\n\ndf %>% \n  filter(timepoint == \"t1\") %>% \n  mutate(rel.vo2max = vo2.max / weight) %>% \n  mutate(w.max.kg = w.max / weight) %>% \n  ggplot(aes(x = rel.vo2max,\n             y = w.max,\n             color = as.factor(id))) +\n  geom_point() +\n  labs(\n    x = TeX(\"Relativ $\\\\dot{V}O_{2maks}$\"),\n    y = TeX(\"$\\\\Watt_{maks}$\"),\n    title = TeX(\"Korrelasjon mellom $\\\\dot{V}O_{2maks}$ og $\\\\Watt_{maks}$\"),\n    color = \"Deltaker-ID\"  # Dette gir navn til legenden\n  ) +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"black\", linetype = \"dashed\") +\n  theme(\n    legend.position = \"right\",\n    legend.text = element_text(size = 6),\n    legend.key.size = unit(0.8, \"lines\")\n  )\n\n\n\n  \n\n\n\n  \n\n\n\n```\n\n## Diskusjon\n\nPå bakgrunn av resultatene vi har observert under testing av $\\dot{V}O_{2maks}$, kan man slå fast at reliabiliteten til metoden vi har brukt er ganske god. Resultatene tyder på at vi får målt det vi er ute etter på en god måte, og det vil variere lite i måle-utstyret fra gang til gang. \n\nDette sikrer at vi med ganske god sikkerhet, kan fastslå om et treningsprogram fungerer, ved å gjøre repeterte tester, med treningsperioder i mellom. \n\n\n","srcMarkdownNoYaml":"\n\n# Assignment 1: Reliability and tools for reproducible data science {#assignment1}\n\n## Introduksjon\n\nReliabilitet er en utrolig viktig faktor innenfor fysiologisk testing. Hvis man ønsker å følge utviklingen til en utøver over en lenger periode er det viktig at testen vi benytter oss av, og utstyret som brukes i testen måler tilnærmet likt hver gang. Hvis testene som blir brukt har høy reliabilitet kan utøvere og trenere stole på at forskjellene i resultater mellom ulike tester skyldes endringer i fysiologiske faktorer og at det ikke er feilmålinger som gir utslag. \n\nFor å i ettertid kunne evaluere effekten av en treningsplan, intervensjon eller periode må man kunne stole på testene som blir gjennomført. Dersom testene som blir benyttet har lav reliabilitet, kan det være vanskelig å skille mellom virkelige prestasjonsforbedringer og tilfeldige variasjoner som skyldes unøyaktighet i målingene. Dette kan resultere i at man endrer et godt fungerende treningsopplegg, eller at man fortsetter med et dårlig fungerende treningsopplegg. \n\nI idrettsvitenskapen forskes det gjerne på effekt av ulike intervensjoner. Uavhengig av om det gjøres forskning på utrente eller elite-utøvere er det viktig at målingene har høy reliabilitet. Dette med bakgrunn i at vi vil levere god kvalitet i forskningen og at det skal være litteratur man skal kunne stole på. \n\nDet ble gjennomført fire testdager 28.08.2024, 29.08.2024, 9.09.2024 og 11.09.2024 for å teste $\\dot{V}O_{2maks}$. Formålet med disse testene var å øve på å kunne gjennomføre fysiologiske tester med høy reliabilitet. Reliabilitet refererer til graden av konsistens eller pålitelighet i målinger evnen til å kunne reprodusere [@RN130], et eksempel på dette er ved fysiologisk testing som repeteres i forskningsprosjekter, der bedre reliabilitet vil indikere hvor god presisjonen er og måling av endring over tid [@RN130]. Det er mange begreper som er relevante for å kunne si noe om reliabilitet, men standardavviket er et av disse. Standardavviket sier noe om hvor langt unna verdiens gjennomsnittlige avstand er fra gjennomsnittet [@Spiegelhalter].\n\nKroppens maksimale oksygenopptak ($\\dot{V}O_{2maks}$) sier noe om kroppens maksimale evne til å ta opp og omsette oksygen [@Bassett]. $\\dot{V}O_{2maks}$ kan beskrives ved hjelp av Ficks likning: $\\dot{V}O_{2maks}$=MVmaks x a-vO2differansemaks. $\\dot{V}O_{2maks}$ måles ved at man måler hvor mye oksygen kroppen klarer å omsette pr minutt [@Bassett]. Det finnes ulike måter og fremstille $\\dot{V}O_{2maks}$ på, de to av disse er absolutt $\\dot{V}O_{2maks}$ beskrevet som (ml &times;min<sup>-1</sup>) eller relative tall relatert til kroppsvekt (ml/kg/min).\n\nI resultatdelen har vi valgt å bruke relativ $\\dot{V}O_{2maks}$ for å beregne reliabiliteten til testene vi har gjennomført. Vi har også valgt å se på sammenhengen mellom relativ $\\dot{V}O_{2maks}$ og wattmaks under $\\dot{V}O_{2maks}$-testen. Forskning viser at høy $\\dot{V}O_{2maks}$, sammen med god mekanisk effektivitet og høy laktatterskel gir bedre utholdenhetsprestasjoner, noe som reflekteres i høyere Wmaks/kg [@Joyner].\n\n## Metode\n\n$\\dot{V}O_{2maks}$-testen ble gjennomført på en ergometersykkel med bukkestyre (Lode Excalibur Sport; Lode B.V., Groningen, Nederland). Kranken kalibreres på Lode-sykkelen før hver teststart. Dette gjøres for å få nøyaktige tråkkdata på hver forsøksperson. Sykkel stilles inn etter utøvers ønske for å sikre best mulig sittestilling ved første test. Sykkel stilles inn etter nøyaktig samme mål ved senere tester for å gjøre reliabiliteten høy. For å måle det maksimale oksygenopptaket ble det brukt Vyntus (Jaeger Vyntus CPX, Hoechberg, Tyskland). Gassanalysator kalibreres til \\< 2,0% differanse og luftvolum kalibreres til \\< 0,2% differanse. Syklistene veies med de klærne de skal sykle med, og 0,3kg trekkes fra (300g er et estimat på vekten av klærne forsøkspersonen har på). For å kunne sikre god relabilitet ble det tydeliggjort at man skulle replisere det siste måltidet før test, ha det samme koffeininntaket, avstå fra alkohol og tobakk de siste 72 timene før test og prøve å få tilnærmet lik søvn, samt trene det samme dagen før test. Da dette er faktorer som kan spille inn på prestasjon og metabolismen [@RN2511] og dermed påvirke relabiliteten. \n\n$\\dot{V}O_{2maks}$-testen gjennomføres etter en fem minutters standardisert oppvarming på ergometersykkelen. Oppvarmingen starter to minutter på 11-12 i Borg, deretter to minutter på 15 i Borg før ett minutt på 11-12 Borg. Testen starter på en belastning (Watt) basert på deltagerens nivå i samråd med utøver og testleder. Det viktigste er at påfølgende $\\dot{V}O_{2maks}$ tester starter på samme watt. Wattbelastningen økte med 20W eller 25W (20W for kvinne og 25W for mann) hvert minutt frem til utøveren når maksimal utmattelse. Maksimal utmattelse ble i denne sammenheng ikke evne til å kunne opprettholde RPM > 60. Under $\\dot{V}O_{2maks}$ var RPM valgfritt. Testleder gjør verbal oppmuntring og sekundering underveis i testen. For at verbal oppmuntring og instruksjon ved test skulle være lik etterstreb vi å ha samme testleder til samme forsøksperson [@Halperin]. Det blir registrert nye oksygenmålinger hvert 30 sek, og de to høyeste påfølgende målingene blir definert som $\\dot{V}O_{2maks}$. Umiddelbart etter test oppgir utøveren opplevd anstrengelse på Borg skala. Maks hjertefrekvens blir lest av fra utøvers pulsklokke. Blodprøve ble tatt fra utøverens fingertupp 1 min etter endt test for å måle \\[BLa-\\]. \\[BLa-\\] blir deretter målt ved hjelp av en Biosen C-line (Biosen C-line Lactate Analyzer, EKF Diagnostic GmbH, Barleben, Germany). Etter endt test ble det hentet ut data som videre ble plottet inn i Excel og videre ført statistikk på ved hjelp av Rstudio.\n\n\n```{r}\n#| code-fold: true\n#| message: false\n#| warning: false\n\nlibrary(readxl)\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(magrittr)\nlibrary(gt)\nlibrary(ggtext)\ndf <- read_xlsx(\"o2-test.xlsx\")\n\n```\n## Resultat\n\nEtter at testene er gjennomført kan vi se nærmere på hver forsøkperson sine data. Dette gir muligheten til å se på hver enkelt forsøksperson om man finner dette interessant (Table 1.1). \nVerdiene man kan se i tabellen, er verdier som er plottet etter endt $\\dot{V}O_{2maks}$-test. \n```{r}\n#| code-fold: true\n#| message: false\n#| warning: false\n\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(knitr)\nlibrary(kableExtra)\n\n# Generer en tabell med nødvendige beregninger\ndf.tbl <- df %>%\n  select(id, timepoint, weight, w.max:borg.max) %>%\n  select(-hr.max, -la.max, -bf.max, -vco2.max, -rer.max, -ve.max) %>%\n  mutate(rel.vo2max = vo2.max / weight,\n         rel.wmax = w.max / weight) %>%\n  pivot_longer(names_to = \"Parameter\", values_to = \"verdier\", cols = w.max:rel.wmax) %>%\n  group_by(id, Parameter) %>%\n  summarise(m = mean(verdier, na.rm = TRUE),\n            s = sd(verdier, na.rm = TRUE)) %>%\n  mutate(m_s = paste0(signif(m, 3), \" (\", signif(s, 2), \")\")) %>%\n  ungroup() %>%\n  select(-m, -s) %>%\n  pivot_wider(names_from = \"id\", values_from = \"m_s\")\n\n# Endre radnavnene ved å bruke mutate() hvis radnavnene er i en kolonne\ndf.tbl <- df.tbl %>%\n  mutate(Parameter = case_when(\n    Parameter == \"rel.vo2max\" ~ \"VO$_{2max}$ (ml/kg/min)\",\n    Parameter == \"w.max\" ~ \"Watt$_{max}$\",\n    Parameter == \"borg.max\" ~ \"Borg$_{max}$\",\n    Parameter == \"vo2.max\" ~ \"VO$_{2max}$ (ml/min)\",\n    Parameter == \"rel.wmax\" ~ \"Watt/kg\",\n    TRUE ~ Parameter  # Hvis verdien ikke matches, behold opprinnelig navn\n  ))\n\n# Lag tabellen med kable og kableExtra, med escape = FALSE for å tillate LaTeX-syntaks\ndf.tbl %>%\n  kable(\"latex\",\n        booktabs = TRUE,\n        escape = FALSE) %>%\n  kable_styling(\n    font_size = 6,              # Redusert skriftstørrelse for å få mer plass\n    full_width = FALSE,\n    position = \"center\",\n    latex_options = \"H\"\n  ) %>%\n  column_spec(2:ncol(df.tbl), width = \"0.5cm\") %>%  # Juster kolonnebredden for alle kolonner unntatt første\n  row_spec(0, bold = TRUE)  |> \n  # Gjør header-raden fet\n  add_footnote(label = \"Table 1.1: Tabellen viser hver deltakers gjennomsnitt og standardavvik i () på verdier vi har undersøkt\", notation = \"none\")\n\n\n\n```\n\n\n\n```{r}\n#| code-fold: true\n#| eval: false\n\n\nlibrary(dplyr)\nlibrary(gt)\n\ndf |> \n  filter(timepoint == \"t1\") |> \n  select(id, vo2.max, w.max, sex) |> \n  group_by(sex) |> \n  summarise(o2mean = mean(vo2.max, na.rm = TRUE),\n            wmean = mean(w.max, na.rm = TRUE),\n            o2sd = sd(vo2.max, na.rm = TRUE),\n            wsd = sd(w.max, na.rm = TRUE))\n\n\n\n  \n\n\n```\n\n\n\n```{r}\n#| code-fold: true\no2meanK <- 3163\no2meanM <- 4380\no2sdK <- 484\no2sdM <- 515\nwmeanK <- 257\nwmeanM <- 352\nwsdK <- 31.0\nwsdM <- 51.6\n```\n\n\nEtter å ha gjennomført VO~2maks~-testene ser vi at kvinnene på 1MAIDR har et gjennomsnittlig oksygenopptak på `r o2meanK` ± `r o2sdK`. Mennene har derimot et gjennomsnittlig oksygenopptak på `r o2meanM` ± `r o2sdM`.\n\n```{r}\n#| code-fold: true\n\ndf.rel <- df |> \n  select(id, timepoint, weight, vo2.max, w.max) |> \n  mutate(rel.vo2 = vo2.max / weight) |> \n  mutate(rel.wmax = w.max / weight)\n\n\n```\n\n\n\n\n\n```{r}\n#| code-fold: true\n#| tbl-cap: \"Reliability relativ vo2maks T1&T2\"\n#| eval: false\n\n\ndf.rel |> \n  \n  #velger hvilke variabler vi er interessert i å se på\n  \n  select(id, timepoint, rel.vo2) |> \n\n\n\n  #benytter oss av pivot_wider for å lage tidy_data\n\n    pivot_wider(names_from = timepoint,\n                values_from = rel.vo2) |> \n    mutate(diff = t2 - t1) |> \n    summarise(MEAN = mean(c(t1, t2), na.rm = TRUE), \n            SD = sd(diff, na.rm = TRUE), \n            TE = SD / sqrt(2), \n            CV = TE/MEAN * 100) |> \n  gt() |> \n  fmt_number(decimals = 2)\n\n\n```\n\n```{r}\n#| echo: false\ncv_perct1_t2 <- 2.47\n```\n\n\n\n\n\n```{r}\n#| code-fold: true\n#| tbl-cap: \"Reliability relativ vo2maks T3&T4\"\n#| eval: false\n\n\ndf.rel |> \n  \n  #velger hvilke variabler vi er interessert i å se på\n  \n  select(id, timepoint, rel.vo2) |> \n\n\n\n  #benytter oss av pivot_wider for å lage tidy_data\n\n    pivot_wider(names_from = timepoint,\n                values_from = rel.vo2) |> \n    mutate(diff = t4 - t3) |> \n    summarise(MEAN = mean(c(t3, t4), na.rm = TRUE), \n            SD = sd(diff, na.rm = TRUE), \n            TE = SD / sqrt(2), \n            CV = TE/MEAN * 100) |> \n  gt() |> \n   fmt_number(decimals = 2)\n \n\n\n```\n\n```{r}\n#| echo: false\ncv_perct3_t4 <- 4.78\n```\n\n\n\nReliabiliteten mellom t1 og t2 er `r cv_perct1_t2`%, mens reliabiliteten mellom t3 og t4 er `r cv_perct3_t4`%. \n\n### Korrelasjon mellom Vo2maks og Wattmaks per kg\n\n```{r}\n#| code-fold: true\n#| message: false\n#| warning: false\n#| fig-cap: \"Figur 1: Hvert punkt = én observasjon\"\n\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(latex2exp)\n\ndf %>% \n  filter(timepoint == \"t1\") %>% \n  mutate(rel.vo2max = vo2.max / weight) %>% \n  mutate(w.max.kg = w.max / weight) %>% \n  ggplot(aes(x = rel.vo2max,\n             y = w.max,\n             color = as.factor(id))) +\n  geom_point() +\n  labs(\n    x = TeX(\"Relativ $\\\\dot{V}O_{2maks}$\"),\n    y = TeX(\"$\\\\Watt_{maks}$\"),\n    title = TeX(\"Korrelasjon mellom $\\\\dot{V}O_{2maks}$ og $\\\\Watt_{maks}$\"),\n    color = \"Deltaker-ID\"  # Dette gir navn til legenden\n  ) +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"black\", linetype = \"dashed\") +\n  theme(\n    legend.position = \"right\",\n    legend.text = element_text(size = 6),\n    legend.key.size = unit(0.8, \"lines\")\n  )\n\n\n\n  \n\n\n\n  \n\n\n\n```\n\n## Diskusjon\n\nPå bakgrunn av resultatene vi har observert under testing av $\\dot{V}O_{2maks}$, kan man slå fast at reliabiliteten til metoden vi har brukt er ganske god. Resultatene tyder på at vi får målt det vi er ute etter på en god måte, og det vil variere lite i måle-utstyret fra gang til gang. \n\nDette sikrer at vi med ganske god sikkerhet, kan fastslå om et treningsprogram fungerer, ved å gjøre repeterte tester, med treningsperioder i mellom. \n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":"html_document","warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"01-reliability-tools.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.56","bibliography":["resources/bib-final.bib"],"editor_options":{"chunk_output_type":"console"}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}